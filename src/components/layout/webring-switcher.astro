---
import { Image } from "astro:assets";
import HcIcon from "@assets/img/hc-icon.svg";

interface Member {
    name: string;
    url: string;
}

const response = await fetch("https://webring.hackclub.com/members.json");
const members = (await response.json()) as Member[];

const siteIndex = members.findIndex(member => new URL(member.url).hostname === Astro.url.hostname);
const previousIndex = (siteIndex - 1 + members.length) % members.length;
const nextIndex = (siteIndex + 1) % members.length;
const previous = members[previousIndex];
const next = members[nextIndex];
---

<div class="flex gap-2 items-center">
    <a href={previous.url} rel="nofollow" class="text-2xl text-text/50 p-1 hover:text-text/80 transition duration-150" title="Previous">‹</a>
    <a href="https://webring.hackclub.com/" title="Hack Club Webring">
        <Image src={HcIcon} alt="Hack Club icon" width={32} height={32} />
    </a>
    <a href={next.url} rel="nofollow" class="text-2xl text-text/50 p-1 hover:text-text/80 transition duration-150" title="Next">›</a>
</div>